<script>
    import { inputData } from '../../store/inheritanceStore';

    // ã‚¹ãƒˆã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã«ãƒã‚¤ãƒ³ãƒ‰ï¼ˆåŒæ–¹å‘ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿç¾ï¼‰
    // $inputData ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰ data ã‚‚å¤‰æ›´ã•ã‚Œã€data ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰ $inputData ã‚‚å¤‰æ›´ã•ã‚Œã¾ã™ã€‚
    let data = $inputData;

    // inputDataã‚’ç›´æ¥ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°çµŒç”±ã§$ã‚¹ãƒˆã‚¢ã‚’æ›´æ–°
    $: $inputData = data;
</script>

<div class="input-card">
    <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ç›¸ç¶šäººæƒ…å ±</h3>
    <div class="form-group">
        <label for="heirsCount">æ³•å®šç›¸ç¶šäººã®äººæ•°</label>
        <input 
            type="number" 
            id="heirsCount" 
            bind:value={data.heirsCount} 
            min="1" 
            required
            class="short-input"
        />
        <span class="unit-text">äºº (é…å¶è€…ã‚’å«ã‚ãŸäººæ•°)</span>
    </div>

    <div class="form-group">
        <label for="isSpouse">é…å¶è€…ã®æœ‰ç„¡</label>
        <select id="isSpouse" bind:value={data.isSpouse} class="select-input">
            <option value={true}>ã‚ã‚Š</option>
            <option value={false}>ãªã—</option>
        </select>
    </div>

    {#if data.isSpouse}
    <div class="form-group sub-group">
        <label for="spouseShare">é…å¶è€…ã®å–å¾—äºˆå®šå‰²åˆ</label>
        <input 
            type="number" 
            id="spouseShare" 
            bind:value={data.spouseShare} 
            min="0" 
            max="100" 
            class="short-input"
        />
        <span class="unit-text">%</span>
    </div>
    {/if}

    <hr>
    
    <h3>ğŸ’° è²¡ç”£ã®è©•ä¾¡ (ä¸‡å††å˜ä½)</h3>

    <div class="form-group">
        <label for="assets">ç¾é‡‘ãƒ»é è²¯é‡‘ãªã©</label>
        <input type="number" id="assets" bind:value={data.assets} min="0" />
        <span class="unit-text">ä¸‡å††</span>
    </div>

    <div class="form-group">
        <label for="realEstate">ä¸å‹•ç”£è©•ä¾¡é¡</label>
        <input type="number" id="realEstate" bind:value={data.realEstate} min="0" />
        <span class="unit-text">ä¸‡å†† (å›ºå®šè³‡ç”£ç¨è©•ä¾¡é¡ãªã©ã‚’æƒ³å®š)</span>
    </div>
    
    <div class="form-group">
        <label for="lifeInsurance">ç”Ÿå‘½ä¿é™ºé‡‘ãƒ»æ­»äº¡é€€è·é‡‘</label>
        <input type="number" id="lifeInsurance" bind:value={data.lifeInsurance} min="0" />
        <span class="unit-text">ä¸‡å†† (åˆè¨ˆé¡)</span>
    </div>

    <div class="form-group">
        <label for="debt">å‚µå‹™ãƒ»è‘¬å¼è²»ç”¨</label>
        <input type="number" id="debt" bind:value={data.debt} min="0" />
        <span class="unit-text">ä¸‡å†† (åˆè¨ˆé¡)</span>
    </div>

    <hr>
    
    <h3>ğŸ›¡ï¸ ç¯€ç¨ã®ãŸã‚ã®ç‰¹ä¾‹</h3>
    
    <div class="form-group">
        <label for="isSmallLandApplied">å°è¦æ¨¡å®…åœ°ç­‰ã®ç‰¹ä¾‹ã‚’è€ƒæ…®ã—ã¾ã™ã‹ï¼Ÿ</label>
        <select id="isSmallLandApplied" bind:value={data.isSmallLandApplied} class="select-input">
            <option value={true}>ã¯ã„ (é©ç”¨ã‚’è€ƒæ…®ã™ã‚‹)</option>
            <option value={false}>ã„ã„ãˆ</option>
        </select>
    </div>
    
    {#if data.isSmallLandApplied}
    <div class="form-group sub-group">
        <label for="smallLandValue">ç‰¹ä¾‹ã‚’é©ç”¨ã™ã‚‹åœŸåœ°ã®è©•ä¾¡é¡</label>
        <input 
            type="number" 
            id="smallLandValue" 
            bind:value={data.smallLandValue} 
            min="0" 
        />
        <span class="unit-text">ä¸‡å†† (æ¸›é¡å‰ã®è©•ä¾¡é¡)</span>
    </div>
    <p class="note">â€» ç‰¹ä¾‹é©ç”¨å¾Œã®è©•ä¾¡é¡ã¯ã€è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã§è‡ªå‹•çš„ã«æ¸›é¡ã•ã‚Œã¾ã™ï¼ˆ80%æ¸›é¡ã‚’æƒ³å®šï¼‰ã€‚</p>
    {/if}
</div>

<style>
    .input-card {
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f9f9f9;
    }
    h3 {
        color: #00796b;
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
        margin-top: 0;
    }
    .form-group {
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
    }
    label {
        flex: 0 0 180px; /* ãƒ©ãƒ™ãƒ«å¹…ã‚’å›ºå®š */
        font-weight: bold;
        margin-right: 15px;
        font-size: 0.95em;
    }
    input[type="number"], .select-input {
        flex: 0 0 120px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
    .short-input {
        flex: 0 0 80px;
    }
    .unit-text {
        margin-left: 10px;
        color: #777;
        font-size: 0.9em;
        flex-grow: 1;
    }
    .sub-group {
        margin-left: 20px;
        padding-left: 10px;
        border-left: 3px solid #ccc;
    }
    .note {
        font-size: 0.8em;
        color: #555;
        margin-top: 10px;
        margin-left: 20px;
    }
    hr {
        margin: 20px 0;
        border: 0;
        border-top: 1px solid #eee;
    }
</style>